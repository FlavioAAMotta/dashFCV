<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCV - Fundação Cristiano Varella - Portal Informático do Câncer</title>
    <link rel="shortcut icon" href="assets/ÍCONE NOVO AZUL ESCURO-8.png" type="image/x-icon">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/virtual-select-plugin/dist/virtual-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/virtual-select-plugin/dist/virtual-select.min.js"></script>

</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <img src="assets/HOSPITAL DO CÂNCER (2).png" alt="FCV Hospital do Câncer" class="logo-text">
            </div>
            <div class="header-title">
                <h1>Portal Informático do Câncer</h1>
                <p>Sistema de Análise e Monitoramento</p>
            </div>
            <div class="header-info">
                <div class="last-update">
                    <span class="update-label">Dados epidemiológicos do RHC coletados no período de 2010 a 2024</span>

                </div>
            </div>
        </div>
    </header>

    <!-- Filtros -->
    <section id="filters-section" class="filters-section">
        <div class="container">
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="periodFilter">Período</label>
                    <div id="periodFilter">
                        
                    </div>
                </div>
                <div class="filter-group">
                    <div style="display: flex; align-items: center;">
                        <label for="regionFilter">Região</label>
                    </div>
                    <div id="regionFilter">
                        
                    </div>
                </div>
                <div class="filter-group">
                    <label for="cityFilter">Cidades</label>
                    <div id="cityFilter" >
                    </div>
                </div>

                <div class="filter-group">
                    <label for="ageFilter">Range de Idades</label>
                    <div id="ageFilterMin">
                        
                    </div>
                </div>
                <div class="filter-group">
                    <div id="ageFilterMax">
                    </div>
                </div>
                <div class="filter-group">
                    <label>&nbsp;</label>
                    <button id="clearFilters" class="clear-filters-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                            height="16">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                            <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Limpar Filtros
                    </button>
                </div>

            </div>
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="sexFilter">Sexo</label>
                    <div id="sexFilter">
                    </div>
                </div>
                <div class="filter-group">

                    <label for="tumorFilterGeneral">Tipo de Tumor (Geral)</label>

                    <div id="tumorFilterGeneral">
                       
                    </div>
                </div>
                <div class="filter-group">

                    <label for="tumorFilter">Tipo de Tumor (Específico)</label>

                    <div id="tumorFilterSpecific">
                       
                    </div>
                </div>
                <div class="filter-group">
                    <label for="estadiamFilter">Estadiamento</label>
                    <div id="estadiamFilter">
                     
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Métricas Principais -->
    <section class="metrics-section">
        <div class="container">
            <div class="metrics-grid">
                <div class="metric-card" data-metric="total">
                    <div class="metric-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Total de Pacientes</h3>
                        <div class="metric-value" id="totalPatients">0</div>
                    </div>
                </div>

                <div class="metric-card" data-metric="new">
                    <div class="metric-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Novos Casos</h3>
                        <div class="metric-value" id="newCases">0</div>
                    </div>
                </div>

                <div class="metric-card" data-metric="male">
                    <div class="metric-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="10" cy="14" r="8"></circle>
                            <path d="M18.5 5.5L22 2"></path>
                            <path d="M22 2v6h-6"></path>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Pacientes Masculinos</h3>
                        <div class="metric-value" id="malePatients">0</div>
                        <div class="metric-percentage" id="malePercentage">0%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="maleProgress"></div>
                        </div>
                    </div>
                </div>

                <div class="metric-card" data-metric="female">
                    <div class="metric-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="8" r="7"></circle>
                            <path d="M12 15v6"></path>
                            <path d="M9 18h6"></path>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Pacientes Femininos</h3>
                        <div class="metric-value" id="femalePatients">0</div>
                        <div class="metric-percentage" id="femalePercentage">0%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="femaleProgress"></div>
                        </div>
                    </div>
                </div>

                <div class="metric-card" data-metric="age">
                    <div class="metric-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12,6 12,12 16,14"></polyline>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Idade Média</h3>
                        <div class="metric-value" id="averageAge">0</div>
                        <div class="metric-unit">anos</div>
                    </div>
                </div>
                <!-- Taxa de Mortalidade -->
                <div class="metric-card" data-metric="mortality">
                    <div class="metric-icon" aria-hidden="true">
                        <!-- ícone: coração com eletrocardiograma (mortalidade) -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="#E74C3C" stroke-width="2" width="40" height="40">
                            <path
                                d="M20.8 8.6c0 5.2-8.8 10.6-8.8 10.6S3.2 13.8 3.2 8.6a4.4 4.4 0 0 1 7-3.5 4.4 4.4 0 0 1 7 3.5">
                            </path>
                            <polyline points="3 12 8 12 10 8 13 16 15 12 21 12"></polyline>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Taxa de Mortalidade por Cancer</h3>
                        <div class="metric-value" id="mortalityRate">0</div>
                        <div class="metric-unit">%</div>
                    </div>
                </div>

                <!-- Proporção de casos em menores de 18 anos -->
                <div class="metric-card" data-metric="under18">
                    <div class="metric-icon" aria-hidden="true">
                        <!-- ícone: adulto + criança -->
                        <svg viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="#3498DB" stroke-width="1.6"
                            stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                            <!-- adulto -->
                            <circle cx="16.5" cy="6.5" r="2.2"></circle>
                            <path
                                d="M14.2 11.2c.7-.6 2.1-1 3.6-1 1.6 0 2.6.4 3.2 1.1.4.5.6 1.1.6 1.8v2.1c0 .6-.5 1.1-1.1 1.1h-6.9" />
                            <!-- criança -->
                            <circle cx="7" cy="8" r="1.4"></circle>
                            <path
                                d="M5.6 11.2c.4-.3 1.2-.6 2.1-.6 1 0 1.6.3 1.9.7.3.4.4.8.4 1.3v1.4c0 .4-.3.8-.8.8H5.8" />
                            <!-- conexão / base (opcional, sugere proximidade) -->
                            <path d="M3 18h18" stroke-opacity="0.06" />
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Proporção de casos em menores de 18 anos</h3>
                        <div class="metric-value" id="avgUnder18">0</div>
                        <div class="metric-unit">%</div>
                    </div>
                </div>


                <!-- Pacientes em Tratamento -->
                <div class="metric-card" data-metric="in_treatment">
                    <div class="metric-icon" aria-hidden="true">
                        <!-- ícone: hospital/predio (em tratamento) -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="#2ECC71" stroke-width="2" width="40" height="40">
                            <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                            <path d="M8 7h8"></path>
                            <path d="M12 11v6"></path>
                            <path d="M9 14h6"></path>
                        </svg>
                    </div>
                    <div class="metric-content">
                        <h3>Estágio Inicial (diagnóstico precoce):</h3>
                        <div class="metric-value" id="avgInitialState">0</div>
                        <div class="metric-unit">%</div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Gráficos Principais -->
    <section class="charts-section">
        <div class="container">
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Evolução Temporal</h3>
                            <p>Novos casos registrados por ano</p>
                        </div>
                        <button id="downloadTemporal" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="temporalChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Análises Detalhadas -->
    <section class="analysis-section">
        <div class="container">
            <div class="analysis-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Distribuição por Estado</h3>
                            <p>Número de casos por estado</p>
                        </div>
                        <button id="downloadGeografic" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="geograficChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Top 10 Cidades Atendidas</h3>
                            <p>Cidades com maior número de casos</p>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="ranking-table" id="citiesTable">
                            <thead>
                                <tr>
                                    <th>Posição</th>
                                    <th>Cidade</th>
                                    <th>Casos</th>
                                    <th>Percentual</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>



            </div>
        </div>
    </section>

    <!-- Análises Detalhadas -->
    <section class="analysis-section">
        <div class="container">
            <div class="analysis-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Distribuição por Faixa Etária</h3>
                            <p>Número de casos por idade</p>
                        </div>
                        <button id="downloadAgeDistribution" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="ageDistributionChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Indicadores Clínicos -->
    <section class="clinical-section">
        <div class="container">
            <div class="clinical-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Distribuição por Etnia</h3>
                            <p>Número de casos por Etnia</p>
                        </div>
                        <button id="downloadRace" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="raceChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Tipos de Tumor Mais Comuns</h3>
                            <p>Top 10 tipos mais frequentes</p>
                        </div>
                        <button id="downloadTumorTypes" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="tumorTypesChart"></canvas>
                    </div>
                </div>
            </div>
    </section>
    <section class="clinical-section">
        <div class="container">
            <div class="clinical-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Distribuição por Ocupação</h3>
                            <p>Número de casos por Ocupação mais frequentes top 10</p>
                        </div>
                        <button id="downloadOccupations" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="occupationsChart"></canvas>
                    </div>
                </div>
            </div>
    </section>

    <section class="analysis-section">
        <div class="container">
            <div class="analysis-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Fatores de Risco (Alcoolismo)</h3>
                            <p>Análise de Alcoolismo</p>
                            <p>Estes dados representam 1 ano de acompanhamento</p>
                        </div>
                        <button id="downloadAlcol" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="riskFactorsAlcolChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Fatores de Risco (Tabagismo)</h3>
                            <p>Análise de Tabagismo</p>
                            <p>Estes dados representam 1 ano de acompanhamento</p>
                        </div>
                        <button id="downloadRiskFactors" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="riskFactorsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Indicadores Clínicos -->
    <section class="clinical-section">
        <div class="container">
            <div class="clinical-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Distribuição por Nível de Educação</h3>
                            <p>Numero de casos por nível de educação</p>
                        </div>
                        <button id="downloadEducationLevel" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="educationChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Gráfico de estadiamento-->
    <section class="analysis-section">
        <div class="container">
            <div class="analysis-grid">
                <div class="chart-card-estadiam">
                    <div class="chart-header">
                        <div>
                            <h3>Estadiamento</h3>
                            <p>Estadiamento por ano</p>
                        </div>
                        <button id="downloadEstadiamG" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container-estadiam">
                        <canvas id="EstadiamChart"></canvas>
                    </div>
                </div>

            </div>
        </div>
    </section>



    <!-- Análise de Histologia -->
    <section class="histology-section">
        <div class="container">
            <div class="histology-grid">
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3>Distribuição por Tipo de Histologia</h3>
                        
                        <p>Classificação histológica dos casos atendidos</p>

                    </div>
                    <div class="table-container">
                        <table class="histology-table" id="histologyTable">
                            <thead>
                                <tr>
                                    <th>Posição</th>
                                    <th>Tipo de Histologia</th>
                                    <th>Número de Casos</th>
                                    <th>Percentual (%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination-controls" id="histologyPagination">
                        <!-- Controles de paginação serão inseridos aqui pelo JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Indicadores Clínicos -->
    <section class="clinical-section">
        <div class="container">
            <div class="clinical-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Quantidades de Óbitos</h3>
                            <p>Situação atual dos pacientes</p>
                            <p>Estes dados representam 1 ano de acompanhamento</p>
                        </div>
                        <button id="downloadNumberObts" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="obitsChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Status de Tratamento</h3>
                            <p>Situação atual dos pacientes</p>
                        </div>
                        <button id="downloadTreatment" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="treatmentChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Indicadores Clínicos -->
    <section class="clinical-section">
        <div class="container">
            <div class="clinical-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Análise de Histórico Familiar</h3>
                            <p>Análise de Histórico Familiar</p>
                        </div>
                        <button id="downloadFamilyHistory" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="familyHistoryChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <div>
                            <h3>Análise de Estado Civil</h3>
                            <p>Análise de Estado Civil</p>
                        </div>
                        <button id="downloadMaritalStatus" class="download-btn">
                            <span class="download-icon"></span>
                            Baixar Gráfico
                        </button>
                    </div>
                    <div class="chart-container">
                        <canvas id="maritalStatusChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="config-section">
        <img id="button-config" class="config-img" src="./assets/config.png" alt="Menu-flutuante">
    </section>
    <div id="div-config" class="config-div">
        <p>Ocultar filtros</p>
        <input id="checkbox-filter" name="checkbox-filter" type="checkbox">
        <p>Ocultar filtros selecionados</p>
        <input id="checkbox-filter-select" name="checkbox-filter-select" type="checkbox">
    </div>

    <footer class="footer">
        <p>
          <strong>Desenvolvido pelo Setor de Pesquisa e Desenvolvimento</strong><br>
        </p>
      
        <p>
          <strong>Fundação Cristiano Varella</strong>
        </p>
      
        <p>
          <em>Dados epidemiológicos do RHC coletados entre 2010 e 2024</em>
        </p>
      </footer>
      

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Carregando dados...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/dashboard.js"></script>
    <!-- Chart.js v4 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <!-- chartjs-chart-geo v4 -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-geo@4"></script>
    <!-- Plugin DataLabels -->

    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />

</body>

</html>